<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Video Color Extractor ‚Äì Palettes from Video/GIF</title>
  <meta name="description" content="Upload a video or GIF to extract color palettes by frame or overall. Perfect for filmmakers, social media creators, and designers.">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- ...existing code for video color extractor tool copied from PickColors.html... -->
<!-- üé¨ Video/GIF Color Palette Extractor -->
<div id="video-color-extractor" class="page">
    <div class="tool-container">
        <div class="tool-header">
            <h2>üé¨ Color Palette from Video / GIF</h2>
            <p>Upload a video or GIF, capture frame, and pick exact colors from the canvas.</p>
        </div>

        <!-- Upload -->
        <div class="input-section">
            <div class="video-upload-box" id="videoUploadBox" onclick="document.getElementById('videoUpload').click()">
                <div class="video-upload-icon">üéûÔ∏è</div>
                <div class="video-upload-label">Upload Video / GIF</div>
                <div class="video-upload-desc">MP4, WebM, MOV, GIF ‚Ä¢ Max 20MB</div>
                <input type="file" id="videoUpload" accept="video/*,image/gif" />
                <video id="videoPreview" class="video-preview" controls onclick="event.stopPropagation()"></video>
            </div>
        </div>

        <!-- Capture + Palette -->
        <div class="two-column">
            <!-- Capture -->
            <div class="article-section">
                <h3>üì∏ Capture Frame</h3>
                <button class="btn" id="captureFrame">Capture Frame</button>
                <canvas id="videoCanvas" style="display:none; margin-top:10px; max-width:100%; border:1px solid #ccc;"></canvas>
            </div>
            <!-- Palette -->
            <div class="output-section">
                <h3>üé® Extracted Palette</h3>
                <div id="videoPalette" class="palette-grid"></div>
                <div class="palette-actions">
                    <button class="btn" id="extractAll">üé® Extract All Colors</button>
                    <button class="btn outline" id="exportJSON">Export JSON</button>
                    <button class="btn outline" id="exportCSS">Export CSS Vars</button>
                    <button class="btn outline" id="copyHEX">Copy HEX List</button>
                    <button class="btn danger" id="clearPalette">Clear</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚úÖ SEO Article Section -->
    <div class="article-box" style="margin:20px 0; padding:20px; border:1px solid #eee; border-radius:18px;">
        <h2>üé¨ Extract Color Palettes from Video & GIF</h2>
        <p>
            The <strong>Video/GIF Color Palette Extractor</strong> lets you upload any video or GIF and instantly 
            extract its color palette. Capture frames, pick colors from the canvas, and create palettes for 
            design, branding, or inspiration.
        </p>

        <h3>üîë Key Features</h3>
        <ul>
            <li>Upload MP4, WebM, MOV, or GIF files up to 20MB</li>
            <li>Capture any frame from your video or GIF</li>
            <li>Extract exact colors for UI, graphics, or web projects</li>
            <li>Export palettes as JSON, CSS variables, or HEX lists</li>
            <li>Clear, copy, and manage palettes effortlessly</li>
        </ul>

        <h3>‚úÖ Why Use This Tool?</h3>
        <p>
            Quickly generate professional color palettes from videos or GIFs without guessing colors. Perfect 
            for <strong>graphic designers, web developers, and content creators</strong>, it simplifies your 
            workflow and ensures color consistency.
        </p>

        <p>üëâ Try the <strong>Video/GIF Color Palette Extractor</strong> to unlock vibrant colors from your media!</p>
    </div>
        </div>
    </div>
</div>

    <script>

// ================== üé¨ Video/GIF Color Palette Extractor ===========================
const videoUpload = document.getElementById("videoUpload");
const videoPlayer = document.getElementById("videoPreview");
const captureBtn = document.getElementById("captureFrame");
const canvas = document.getElementById("videoCanvas");
let ctx = null;
if (canvas) {
    ctx = canvas.getContext("2d");
} else {
    console.error("videoCanvas not found");
}
const paletteDiv = document.getElementById("videoPalette");

let videoPalette = [];

// Upload video
videoUpload.addEventListener("change", e => {
    const file = e.target.files[0];
    if (!file) return;
    if (!(file.type.startsWith("video/") || file.type === "image/gif")) {
        return alert("Please select a valid video or GIF.");
    }
    if (file.size > 20 * 1024 * 1024) {
        return alert("File must be under 20MB.");
    }
    const url = URL.createObjectURL(file);
    videoPlayer.src = url;
});

// Capture frame
captureBtn.addEventListener("click", () => {
    if (videoPlayer.readyState < 2) return alert("Video not ready yet!");
    canvas.width = videoPlayer.videoWidth;
    canvas.height = videoPlayer.videoHeight;
    ctx.drawImage(videoPlayer, 0, 0, canvas.width, canvas.height);
    canvas.style.display = "block";
});

// Pick color from canvas
canvas.addEventListener("click", e => {
    const rect = canvas.getBoundingClientRect();
    const scaleX = canvas.width / rect.width;
    const scaleY = canvas.height / rect.height;
    const x = Math.floor((e.clientX - rect.left) * scaleX);
    const y = Math.floor((e.clientY - rect.top) * scaleY);
    const pixel = ctx.getImageData(x, y, 1, 1).data;
    const hex = rgbToHex(pixel[0], pixel[1], pixel[2]).toUpperCase();

    if (!videoPalette.includes(hex)) {
        videoPalette.push(hex);
        renderVideoPalette();
        showToast(`üé® Added ${hex}`);
    }
});

// Extract ALL visible colors (no max limit)
function extractColorsFromCanvas() {
    if (canvas.style.display === "none") {
        showToast("‚ö†Ô∏è Capture a frame first!");
        paletteDiv.innerHTML = "<div style='color:#c00; padding:1em;'>Please capture a frame from the video before extracting colors.</div>";
        return;
    }

    let data;
    try {
        data = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
    } catch (e) {
        paletteDiv.innerHTML = "<div style='color:#c00; padding:1em;'>Unable to read canvas data. Make sure a video frame is captured and the video is from a supported source.</div>";
        showToast("‚ùå Unable to read canvas data");
        return;
    }

    const colorMap = new Map();

    // ‚ö° Reduce granularity slightly (step = 16 ‚Üí ~4M possible colors, safe for browsers)
    for (let i = 0; i < data.length; i += 4) {
        let r = Math.round(data[i] / 16) * 16;
        let g = Math.round(data[i + 1] / 16) * 16;
        let b = Math.round(data[i + 2] / 16) * 16;
        const hex = rgbToHex(r, g, b).toUpperCase();
        colorMap.set(hex, (colorMap.get(hex) || 0) + 1);
    }

    // Sare unique colors frequency ke sath
    const sorted = Array.from(colorMap.entries()).sort((a, b) => b[1] - a[1]);
    const newPalette = sorted.map(entry => entry[0]); // ‚úÖ sabhi colors

    if (newPalette.length === 0) {
        paletteDiv.innerHTML = "<div style='color:#c00; padding:1em;'>No colors found. Try capturing a different frame or using a different video.</div>";
        showToast("‚ö†Ô∏è No colors found");
        return;
    }

    // Duplicate avoid karo
    videoPalette = [...new Set([...videoPalette, ...newPalette])];
    renderVideoPalette();
    showToast(`‚úÖ Extracted ${newPalette.length} unique colors`);
}

// Render palette
function renderVideoPalette() {
    paletteDiv.innerHTML = "";
    videoPalette.forEach(hex => {
        const div = document.createElement("div");
        div.className = "palette-color";
        div.style.background = hex;
        div.textContent = hex;
        div.onclick = () => {
            copyToClipboard(hex);
            showToast(`üìã Copied ${hex}`);
        };
        paletteDiv.appendChild(div);
    });
}

// ‚úÖ Helper: Download any blob as file
function downloadBlob(blob, filename) {
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}

// Export JSON
function exportJSON() {
    if (videoPalette.length === 0) return showToast("‚ö†Ô∏è No colors to export.");
    const blob = new Blob([JSON.stringify(videoPalette, null, 2)], { type: "application/json" });
    downloadBlob(blob, "palette.json");
    showToast("‚úÖ JSON Exported");
}

// Export CSS Vars
function exportCSSVars() {
    if (videoPalette.length === 0) return showToast("‚ö†Ô∏è No colors to export.");
    let css = ":root {\n";
    videoPalette.forEach((c, i) => css += `  --color-${i + 1}: ${c};\n`);
    css += "}";
    const blob = new Blob([css], { type: "text/css" });
    downloadBlob(blob, "palette.css");
    showToast("‚úÖ CSS Vars Exported");
}

// Copy HEX List
function copyHEXList() {
    if (videoPalette.length === 0) return showToast("‚ö†Ô∏è No colors to copy.");
    copyToClipboard(videoPalette.join(", "));
    showToast("üìã HEX list copied");
}

// Clear Palette
function clearPalette() {
    videoPalette = [];
    renderVideoPalette();
    showToast("üßπ Cleared");
}

// Wire buttons AFTER DOM loaded
document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("exportJSON").onclick = exportJSON;
    document.getElementById("exportCSS").onclick = exportCSSVars;
    document.getElementById("copyHEX").onclick = copyHEXList;
    document.getElementById("clearPalette").onclick = clearPalette;
    document.getElementById("extractAll").onclick = () => extractColorsFromCanvas();
});


    </script>
        <script src="PickColors.js"></script>

</body>
</html>
